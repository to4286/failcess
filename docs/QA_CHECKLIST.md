# QA 체크리스트 (MVP)

댓글·응원·커피챗·팔로우 알림 및 로그인/로그아웃 기능 중심 테스트 가이드

---

## 1. 댓글 알림

| 구분 | 테스트 항목 | 예상 결과 | ✓ |
|---|---------|---------|---|
| **정상** | 다른 유저 게시물에 댓글 작성 시 | 게시물 작성자에게 알림 즉시 표시 | |
| **정상** | 알림 클릭 시 | 해당 게시물 상세 페이지(#comments)로 이동 | |
| **정상** | 전체 보기 모달에서 댓글 알림 클릭 | 게시물 상세 페이지로 이동 후 모달 닫힘 | |
| **예외** | 본인 게시물에 댓글 작성 시 | 알림 생성되지 않음 | |
| **예외** | 알림 수신 거부(is_subscribed=false)한 게시물에 댓글 시 | 해당 유저에게 알림 생성되지 않음 | |
| **데이터** | 알림 content에 닉네임 볼드 처리 | **닉네임** 형식으로 표시됨 | |
| **상태** | Realtime 구독 | 새 댓글 알림 시 리스트 자동 갱신 | |

---

## 2. 응원해요 알림

| 구분 | 테스트 항목 | 예상 결과 | ✓ |
|---|---------|---------|---|
| **정상** | 다른 유저 게시물에 응원해요 클릭 시 | 게시물 작성자에게 알림 즉시 표시 | |
| **정상** | 알림에 🙌 아이콘 배지 표시 | 프로필 사진 우측 하단에 손바닥 아이콘 노출 | |
| **정상** | 알림 클릭 시 | 해당 게시물 상세 페이지로 이동 | |
| **정상** | 동일 게시물에 여러 명이 응원 시 | 알림 1건으로 합쳐지고, 최신 updated_at 기준 상단 노출 | |
| **예외** | 본인 게시물에 응원해요 클릭 시 | 알림 생성되지 않음 | |
| **예외** | 이미 응원한 게시물에서 응원 취소 후 재응원 | 알림 정상 생성 | |
| **데이터** | content에 닉네임·게시물 제목 볼드 | **닉네임**, **제목** 형식으로 표시 | |
| **상태** | Realtime 구독 | 새 응원 알림 시 리스트 자동 갱신 | |

---

## 3. 커피챗 알림

| 구분 | 테스트 항목 | 예상 결과 | ✓ |
|---|---------|---------|---|
| **정상** | 커피챗 요청 보내기 성공 시 | 요청 수신자에게 coffee_request 알림 표시 | |
| **정상** | coffee_request 알림에 ☕ 아이콘 | 프로필 사진 우측 하단에 커피 아이콘 노출 | |
| **정상** | coffee_request 알림 클릭 시 | 마이페이지 > 커피챗 탭으로 이동 | |
| **정상** | 커피챗 수락 시 | 요청 발신자에게 coffee_accept 알림 표시 | |
| **정상** | coffee_accept 알림 클릭 시 | 수락한 유저 이메일 공개 모달 표시 | |
| **예외** | RPC 미적용(404) 시 | 요청/수락은 성공, 알림만 생성 안 됨 (콘솔 경고) | |
| **데이터** | content에 닉네임 볼드 | **닉네임** 형식으로 표시 | |
| **상태** | 전체 보기 모달 | 커피챗 알림 포함, 동일 클릭 동작 | |

---

## 4. 팔로우 알림

| 구분 | 테스트 항목 | 예상 결과 | ✓ |
|---|---------|---------|---|
| **정상** | 다른 유저 팔로우 시 | 팔로우 대상에게 follow 알림 즉시 표시 | |
| **정상** | 팔로우 알림 클릭 시 | 팔로우한 유저 프로필(/user/[sender_id])로 이동 | |
| **정상** | UserListModal에서 팔로우 시 | 동일하게 알림 생성 | |
| **예외** | 이미 팔로우한 유저 재팔로우 시도 | DB 제약으로 insert 실패, 알림 생성 안 됨 | |
| **예외** | 본인 팔로우 시도 | UI에서 비활성화되어 시도 불가 | |
| **데이터** | content에 닉네임 볼드 | **닉네임**님이 회원님을 팔로우했습니다. | |
| **상태** | 전체 보기 모달 | 팔로우 알림 포함, 동일 클릭 동작 | |

---

## 5. 로그인 / 로그아웃

| 구분 | 테스트 항목 | 예상 결과 | ✓ |
|---|---------|---------|---|
| **정상** | 로그인 성공 시 | 네비게이션 바에 마이페이지/설정/로그아웃 표시 | |
| **정상** | 로그아웃 클릭 시 | signOut 후 메인(/)으로 강제 새로고침 | |
| **상태** | 로그아웃 후 응원해요 상태 | 이전 세션의 '응원함' 상태 초기화 | |
| **상태** | 로그아웃 후 알림 섹션 | 알림 영역 비표시(로그인 필요) | |
| **상태** | 로그아웃 후 네비게이션 바 | '로그인' 버튼만 표시 | |
| **상태** | 회원 탈퇴 후 signOut | 메인으로 강제 새로고침 | |

---

## 6. 알림 공통

| 구분 | 테스트 항목 | 예상 결과 | ✓ |
|---|---------|---------|---|
| **정상** | 메인 사이드바 알림 개수 | 최신순 6개만 표시 | |
| **정상** | 전체 보기 클릭 | 모달 열림, 최근 30일 알림 무한 스크롤 | |
| **정상** | 알림 읽음 처리 | 클릭 시 is_read=true, 스타일 변경 | |
| **데이터** | 알림 타입별 아이콘 | like: 🙌, coffee: ☕, follow: 없음 | |
| **데이터** | 시간 표시 | updated_at 기준 상대 시간(예: 방금 전, 5분 전) | |
| **상태** | 탭 전환 후 복귀 | visibilitychange 시 알림 리스트 재조회 | |

---

## 7. DB/RPC 사전 확인

| 항목 | 확인 방법 | ✓ |
|---|---------|---|
| create_comment_notification RPC | 댓글 작성 후 알림 생성 여부 | |
| create_like_notification RPC | 응원해요 후 알림 생성 여부 | |
| create_coffee_chat_notification RPC | 커피챗 요청/수락 후 알림 생성 여부 | |
| create_follow_notification RPC | 팔로우 후 알림 생성 여부 | |
| notifications.post_id nullable | 커피챗·팔로우 알림 insert 가능 여부 | |
| Realtime publication | notifications 테이블 Realtime 구독 가능 여부 | |

---

## 테스트 순서 권장

1. **로그인** → 알림 기능 테스트
2. **댓글 알림** → 다른 계정으로 댓글 후 알림 확인
3. **응원해요 알림** → 다른 계정으로 응원 후 알림 확인
4. **커피챗 알림** → 요청/수락 플로우 각각 확인
5. **팔로우 알림** → 다른 유저 팔로우 후 알림 확인
6. **로그아웃** → 새로고침, 응원해요·알림 상태 초기화 확인
